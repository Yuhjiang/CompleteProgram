# 网络知识

## TCP的三次握手
[TCP的三次握手和四次挥手](https://juejin.im/post/5b29d2c4e51d4558b80b1d8c)
(https://hit-alibaba.github.io/interview/basic/network/TCP.html)

![TCP三次握手](https://user-gold-cdn.xitu.io/2018/6/26/1643a1dd6df4813b?imageslim)

![TCP三次握手SYN和ACK关系](https://raw.githubusercontent.com/HIT-Alibaba/interview/master/img/tcp-connection-made-three-way-handshake.png)

1. Client向Server发送syn，初始化客户端序列号（syn）
2. Server发送自己的syn，并且作为应答，发送Client的syn+1作为ack给Client（syn， ack）
3. Client收到Server的syn和ack，确认连接，并发送Server的syn+1作为ack给Server

## TCP的四次挥手
[TCP的三次握手和四次挥手](https://juejin.im/post/5b29d2c4e51d4558b80b1d8c)
(https://hit-alibaba.github.io/interview/basic/network/TCP.html)

![动图解释TCP四次挥手](https://user-gold-cdn.xitu.io/2018/6/26/1643a20296de1ff0?imageslim)

1. Client想要结束连接，发送（FIN=1，seq=x）给Server，表示自己可以没有数据可以发送，但仍然
可以接收数据，并进入FIN_wait_1状态。
2. Server接收到FIN，发送确认包(ACK=1, ACKnum=x+1)，表示自己收到了Client发送的关闭请求
但自己还没有准备好关闭，进入Close_WAIT状态。Client接收到了这个ACK后，进入FIN_WAIT_2状态，
等待Server关闭连接
3. Server发送（FIN=1，seq=y），表示自己已经准备好结束，然后进入LAST_ACK状态，等待Client
最后的ACK
4. Client接收到了Server的ACK包后，发送确认包(ACK=1, ACKnum=y+1)，并进入TIME_WAIT状态，
Server接收到了最后ACK包，进入Close状态。
5. Client在一段时间（_两个最大段生命周期，2MSL，2 Maximum Segment Lifetime_），没有接收
到Server的ACK，认为Server关闭了连接，，Client也进入Close状态。